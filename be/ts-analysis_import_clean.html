<!DOCTYPE html>
<html lang="be">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YX34NR0GKC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-YX34NR0GKC');
    </script>

    <meta charset="utf-8">
    <title>Часовыя шэрагі: імпарт і ачыстка даных - Суб'ект даных</title>
    <meta name="description" content="">
    <meta name="author" content="Антон Парфенчык">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Le styles -->
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://jatvyag.github.io/be/theme/local.css" >
    <link rel="stylesheet" href="https://jatvyag.github.io/be/theme/pygments.css" >
    <link rel="stylesheet" href="https://jatvyag.github.io/be/theme/font-awesome.css" >
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">

    <!-- Add Open Graph tags -->
    <meta property="og:title" content="Часовыя шэрагі: імпарт і ачыстка даных" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="images/thumbs/is_ts.png" />
    <meta property="og:url" content="https://jatvyag.github.io/be/ts-analysis_import_clean.html" />
    <meta property="og:description" content="Пераўтварэнне даных часовых шэрагаў аб інфармацыйных сістэмах і рэсурсах і першы погляд на іх" />
    <meta property="og:locale" content="en_US.utf8" />
    <meta property="og:site_name" content="Суб&#39;ект даных" />
    <meta property="article:published_time" content="2023-12-12" />
    <meta property="article:modified_time" content="2023-12-12" />
    <meta property="article:section" content="Артыкулы" />
    <meta property="article:tag" content="аналіз даных" />
    <meta property="article:tag" content="імпарт і ачыстка даных" />
    <meta property="article:tag" content="часовыя шэрагі" />


</head>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
	<a href="https://jatvyag.github.io/be" class="brand">Суб'ект даных</a>
      </div>
      <div class="span3" id="blog-nav">
	<ul class="nav nav-pills pull-right">
        <li><a href="portfolio.html">Партфоліо</a></li>
            <li><a href="https://jatvyag.github.io/be/pages/reader.html">Чытачу</a></li>
	    <li  class="active" >
	      <a href="https://jatvyag.github.io/be/category/artykuly.html ">Артыкулы</a>

    <!--choose language from dropdown menu-->
    <li>
      <div class="btn-group">
        <a class="btn btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-globe"></i>
Мова          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <a href="https://jatvyag.github.io/">English</a>
          <a href="https://jatvyag.github.io/be/">Беларуская</a>
  
        </ul>
    </li>

    <!--choose language from other than current language variants, disabled-->

    <!--choose language from all variants, disabled-->
    
	</ul>
      </div>
    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">

        <div class="span12">
    <div class='article'>
      <div class="row-fluid">
           <div class="content-title span9">
             <h1>Часовыя шэрагі: імпарт і ачыстка&nbsp;даных</h1>
           </div>
      </div>
    <div class="row-fluid">

      <div class="span2">
<p>12 снежня 2023</p>
<p style="text-align: left;">
Катэгорыя: <a href="https://jatvyag.github.io/be/category/artykuly.html">Артыкулы</a>
</p>
<p>Зменены: 12.12.2023
</p>
<p style="text-align: left;">
 
Меткі:    <ul>
        <li><a href="https://jatvyag.github.io/be/tag/analiz-danykh.html">аналіз даных</a></li>
        <li><a href="https://jatvyag.github.io/be/tag/impart-i-achystka-danykh.html">імпарт і ачыстка даных</a></li>
        <li><a href="https://jatvyag.github.io/be/tag/chasovyia-sheragi.html">часовыя шэрагі</a></li>
    </ul>
</p>
<p>
</p>

<p style="text-align: left;">
    <br>
    <p>Тэма: <b>ІР ІС</b></p>
    <p>Частка <b>2</b> з <b>2</b>.
    </p>

        <p>Папярэднія артыкулы тэмы:</p>
            <p>
            <ol class="parts">
                        <li >
                        <a href='https://jatvyag.github.io/be/web-scraping.html'><span class="caps">JSON</span> вэб-скрапінг&nbsp;даных</a>
                    </li>
            </ol>
            </p>

</p>          <!-- added share post element-->
          <p style="padding: 1px;">&nbsp</p>
          <section style="position:bottom">
            <p id="post-share-links">
Падзяліцца:              <ul>
              <li style="list-style-image:url('theme/images/icons/linkedin.png')"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//jatvyag.github.io/be/ts-analysis_import_clean.html&title=%D0%A7%D0%B0%D1%81%D0%BE%D0%B2%D1%8B%D1%8F%20%D1%88%D1%8D%D1%80%D0%B0%D0%B3%D1%96%3A%20%D1%96%D0%BC%D0%BF%D0%B0%D1%80%D1%82%20%D1%96%20%D0%B0%D1%87%D1%8B%D1%81%D1%82%D0%BA%D0%B0%C2%A0%D0%B4%D0%B0%D0%BD%D1%8B%D1%85&summary=%D0%9F%D0%B5%D1%80%D0%B0%D1%9E%D1%82%D0%B2%D0%B0%D1%80%D1%8D%D0%BD%D0%BD%D0%B5%20%D0%B4%D0%B0%D0%BD%D1%8B%D1%85%20%D1%87%D0%B0%D1%81%D0%BE%D0%B2%D1%8B%D1%85%20%D1%88%D1%8D%D1%80%D0%B0%D0%B3%D0%B0%D1%9E%20%D0%B0%D0%B1%20%D1%96%D0%BD%D1%84%D0%B0%D1%80%D0%BC%D0%B0%D1%86%D1%8B%D0%B9%D0%BD%D1%8B%D1%85%20%D1%81%D1%96%D1%81%D1%82%D1%8D%D0%BC%D0%B0%D1%85%20%D1%96%20%D1%80%D1%8D%D1%81%D1%83%D1%80%D1%81%D0%B0%D1%85%20%D1%96%20%D0%BF%D0%B5%D1%80%D1%88%D1%8B%20%D0%BF%D0%BE%D0%B3%D0%BB%D1%8F%D0%B4%20%D0%BD%D0%B0%C2%A0%D1%96%D1%85&source=https%3A//jatvyag.github.io/be/ts-analysis_import_clean.html" title="Share on LinkedIn">LinkedIn</a></li>
              <li style="list-style-image:url('theme/images/icons/twitter.png')"><a href="https://twitter.com/intent/tweet?text=%D0%A7%D0%B0%D1%81%D0%BE%D0%B2%D1%8B%D1%8F%20%D1%88%D1%8D%D1%80%D0%B0%D0%B3%D1%96%3A%20%D1%96%D0%BC%D0%BF%D0%B0%D1%80%D1%82%20%D1%96%20%D0%B0%D1%87%D1%8B%D1%81%D1%82%D0%BA%D0%B0%C2%A0%D0%B4%D0%B0%D0%BD%D1%8B%D1%85&url=https%3A//jatvyag.github.io/be/ts-analysis_import_clean.html&hashtags=analiz-danykh,impart-i-achystka-danykh,chasovyia-sheragi" title="Share on Twitter">Twitter</a></li>
              <li style="list-style-image:url('theme/images/icons/facebook.png')"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A//jatvyag.github.io/be/ts-analysis_import_clean.html" title="Share on Facebook">Facebook</a></li>
              <li style="list-style-image:url('theme/images/icons/envelope.png')"><a href="mailto:?subject=%D0%A7%D0%B0%D1%81%D0%BE%D0%B2%D1%8B%D1%8F%20%D1%88%D1%8D%D1%80%D0%B0%D0%B3%D1%96%3A%20%D1%96%D0%BC%D0%BF%D0%B0%D1%80%D1%82%20%D1%96%20%D0%B0%D1%87%D1%8B%D1%81%D1%82%D0%BA%D0%B0%C2%A0%D0%B4%D0%B0%D0%BD%D1%8B%D1%85&amp;body=https%3A//jatvyag.github.io/be/ts-analysis_import_clean.html" title="Share via Email">Email</a></li>
              </ul>
            </p>
          </section>
      </div>

      <div class="span8">
        
<h3 id="_1">Загрузка неабходных бібліятэк</h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</code></pre></div>
<h3 id="_2">Вызначэнне ўласных функцый</h3>
<h4 id="_3">Функцыя стварэння фрэйма даных часовых шэрагаў</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">time_series</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
<span class="w">    </span><span class="sd">'''Creates time series data frames with random noise'''</span>
    <span class="c1"># спрашчэнне назваў слупкоў</span>
    <span class="n">df_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'reg'</span><span class="p">,</span> <span class="s1">'upd'</span><span class="p">,</span> <span class="s1">'exc'</span><span class="p">]</span> 
    <span class="n">min_df</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df_cols</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> 
    <span class="n">max_df</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df_cols</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>
    <span class="c1"># стварыць пусты індэкс даты і часу</span>
    <span class="n">df_ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">min_df</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">max_df</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'ids'</span><span class="p">)</span> 
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_cols</span><span class="p">:</span>
        <span class="c1"># стварыць скрыю даты і часу для кожнага слупка</span>
        <span class="n">temp_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">col</span><span class="p">)[</span><span class="s1">'num'</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="c1"># аб'яднаць серыі ў адзін фрэйм даных</span>
        <span class="n">df_ts</span> <span class="o">=</span> <span class="n">df_ts</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">temp_df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>      
    <span class="c1"># выдаліць часовы індэкс</span>
    <span class="n">df_ts</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'ids'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
    <span class="c1"># NaN можа разглядацца зманліва, і ў нашым выпадку нулі маюць большы сэнс</span>
    <span class="n">df_ts</span><span class="p">[</span><span class="n">df_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_ts</span><span class="p">[</span><span class="n">df_cols</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="c1"># перафарміраваць да месячных даных, у адваротным выпадку гэтых даных недастаткова для вывадаў</span>
    <span class="n">df_ts</span> <span class="o">=</span> <span class="n">df_ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'M'</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> 
    <span class="c1"># стварыць выпадковы шум для параўнання</span>
    <span class="n">mean_rand</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">df_ts</span><span class="o">.</span><span class="n">std</span><span class="p">()))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> 
    <span class="c1"># стварыць выпадковы стан для прайграванасці</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span> 
    <span class="n">df_ts</span><span class="p">[</span><span class="s1">'rand'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">mean_rand</span><span class="p">,</span> <span class="n">df_ts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">df_ts</span>
</code></pre></div>
<h4 id="_4">Функцыя стварэння графікаў</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ts_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">kind</span><span class="p">):</span>
<span class="w">    </span><span class="sd">'''Creates one of three seaborn multi-plots'''</span>
    <span class="c1"># melted dataframe лягчэй выкарыстоўваць у seaborn</span>
    <span class="n">melted_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">'reg'</span><span class="p">,</span> <span class="s1">'upd'</span><span class="p">,</span> <span class="s1">'exc'</span><span class="p">,</span> <span class="s1">'rand'</span><span class="p">],</span> 
                       <span class="n">var_name</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">'Number'</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">melted_df</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">to_replace</span><span class="o">=</span><span class="p">{</span><span class="s1">'reg'</span><span class="p">:</span><span class="s1">'Registration'</span><span class="p">,</span> 
                                        <span class="s1">'upd'</span><span class="p">:</span><span class="s1">'Update'</span><span class="p">,</span> 
                                        <span class="s1">'exc'</span><span class="p">:</span><span class="s1">'Exclusion'</span><span class="p">,</span> 
                                        <span class="s1">'rand'</span><span class="p">:</span><span class="s1">'Random Noise'</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s1">'histogram'</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">melted_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Number'</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> 
                        <span class="n">col_wrap</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">'hist'</span><span class="p">,</span> 
                        <span class="n">height</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="s1">'Events Number'</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">'</span><span class="si">{col_name}</span><span class="s1">'</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Histograms'</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s1">'lineplot'</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">relplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">melted_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'date'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Number'</span><span class="p">,</span> 
                        <span class="n">row</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">'line'</span><span class="p">,</span> 
                        <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="s1">'Event Numbers'</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s1">'</span><span class="si">{row_name}</span><span class="s1">'</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Number of events over time'</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">':'</span><span class="p">)</span>
            <span class="c1"># без двух наступных радкоў не ўсе гады пазначаны на восі іксаў</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">YearLocator</span><span class="p">())</span> 
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">'%Y'</span><span class="p">))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s1">'boxplot'</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">melted_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Number'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> 
                        <span class="n">kind</span><span class="o">=</span><span class="s1">'box'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">'Event'</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                        <span class="n">aspect</span><span class="o">=</span><span class="mf">5.5</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">set_axis_labels</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">'Boxplots'</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">'bold'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="s1">'Няма чаго паказаць. Калі ласка, удакладніце: histogram, lineplot, ці boxplot'</span>
    <span class="k">return</span> <span class="n">g</span>  
</code></pre></div>
<h3 id="_5">Загрузка даных</h3>
<h4 id="_6">Загрузка слупкоў з унікальнымі лічбамі і датамі</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># спрасціць назвы слупкоў</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'num'</span><span class="p">,</span> <span class="s1">'reg'</span><span class="p">,</span> <span class="s1">'upd'</span><span class="p">,</span> <span class="s1">'exc'</span><span class="p">]</span> 

<span class="c1"># даныя, звязаныя з рэгістрацыяй, абнаўленнем і выключэннем інфармацыйных сістэм</span>
<span class="n">sys_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/inf_sys.csv'</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">'numberOnRegistration'</span><span class="p">,</span> 
                                                                       <span class="s1">'dateOnRegistration'</span><span class="p">,</span>
                                                                       <span class="s1">'dateActyalization'</span><span class="p">,</span>
                                                                       <span class="s1">'dateExclude'</span><span class="p">])</span>
<span class="n">sys_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">cols</span>

<span class="c1"># даныя, звязаныя з рэгістрацыяй, абнаўленнем і выключэннем інфармацыйных рэсурсаў</span>
<span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'data/inf_res.csv'</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">'numberOnRegistration'</span><span class="p">,</span>
                                                                       <span class="s1">'dateOnRegistration'</span><span class="p">,</span>
                                                                       <span class="s1">'dateActualization'</span><span class="p">,</span> 
                                                                       <span class="s1">'dateExclude'</span><span class="p">])</span>
<span class="n">res_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">cols</span>
</code></pre></div>
<h4 id="_7">Робім часовы шэраг з неапрацаваных лічбаў</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Фрэйм даных часововага шэрагу інфармацыйных сістэм</span>
<span class="n">sys_df_dt</span> <span class="o">=</span> <span class="n">time_series</span><span class="p">(</span><span class="n">sys_df</span><span class="p">)</span>

<span class="c1"># Фрэйм даных часововага шэрагу інфармацыйных рэсурсаў</span>
<span class="n">res_df_dt</span> <span class="o">=</span> <span class="n">time_series</span><span class="p">(</span><span class="n">res_df</span><span class="p">)</span>
</code></pre></div>
<h3 id="_8"><strong>Агляд падзей з інфармацыйнымі сістэмамі</strong></h3>
<hr/>
<h4 id="_9">Агульная колькасць размеркаванняў падзей</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">sys_df_dt</span><span class="p">,</span> <span class="s1">'histogram'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_12_0.png"/></p>
<p>Размеркаванне выглядае моцна скажоным, асабліва ў параўнанні з выпадковымі лічбамі.</p>
<h4 id="_10">Падрабязная інфармацыя пра агульную колькасць падзей</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">sys_df_dt</span><span class="p">,</span> <span class="s1">'boxplot'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_15_0.png"/></p>
<p>Колькасць рэгістрацый мае большую дысперсію, аднак даныя маюць велізарныя выкіды.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Давайце паглядзім на нашы выкіды</span>
<span class="n">sys_df_dt</span><span class="o">.</span><span class="n">reg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nx">date</span>
<span class="mi">2014</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span><span class="w">    </span><span class="mi">58</span>
<span class="mi">2014</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span><span class="w">    </span><span class="mi">25</span>
<span class="mi">2014</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">31</span><span class="w">    </span><span class="mi">13</span>
<span class="nx">Name</span><span class="p">:</span><span class="w"> </span><span class="nx">reg</span><span class="p">,</span><span class="w"> </span><span class="nx">dtype</span><span class="p">:</span><span class="w"> </span><span class="nx">int64</span>
</code></pre></div>
<p>Тройка найбольшых выкідаў - гэта другая палова 2014 года.</p>
<h4 id="_11">Штомесячныя змены падзей у часе</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">sys_df_dt</span><span class="p">,</span> <span class="s1">'lineplot'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_20_0.png"/></p>
<p>Шэрая пункцірная лінія азначае як мінімум адну падзею ў месяц. Як мы бачым, выключэнне з рэестра або змяненне запісу - даволі рэдкая падзея.</p>
<p>У нас ёсць адна незвычайная вяршыня, якую пазней можа спатрэбіцца зрабіць больш гладкай. Тым не менш, графік выглядае стацыянарным: не дэманструе відавочнай тэндэнцыі і сезоннасці.</p>
<p>Такім чынам, мы можам пабудаваць прагнастычную мадэль. Аднак найбольш перспектыўным з’яўляецца колькасць рэгістрацыі ў месяц.</p>
<p>Давайце паглядзім на іншы фрэйм даных.</p>
<h3 id="_12"><strong>Агляд падзей інфармацыйных рэсурсаў</strong></h3>
<hr/>
<h4 id="_13">Агульная колькасць размеркаванняў падзей</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">res_df_dt</span><span class="p">,</span> <span class="s1">'histogram'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_23_0.png"/></p>
<p>Размеркаванне таксама скажонае. Аднак колькасць рэгістрацый больш збалансаваная.</p>
<h4 id="_14">Падрабязная інфармацыя пра агульную колькасць падзей</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">res_df_dt</span><span class="p">,</span> <span class="s1">'boxplot'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_26_0.png"/></p>
<p>Нягледзячы на выкіды, дысперсія колькасці рэгістрацыі бліжэй да выпадковых цэлых лічбаў.</p>
<h4 id="_15">Штомесячныя змены падзей у часе</h4>
<div class="highlight"><pre><span></span><code><span class="n">ts_plot</span><span class="p">(</span><span class="n">res_df_dt</span><span class="p">,</span> <span class="s1">'lineplot'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="images/ts-analysis_import_clean/output_29_0.png"/></p>
<p>У нас можа быць тэндэнцыя, аўтакарэляцыя і сезоннасць колькасці рэгістрацый. Колькасць мадыфікацый запісаў стала больш-менш стабільнай з 2018 года. Астатнія даныя ўяўляюць сабой больш рэдкія падзеі.</p>
<h3 id="_16"><strong>Заключэнне</strong></h3>
<hr/>
<p>У нас дастаткова даных для аналізу часовых шэрагаў рэгістрацыі інфармацыйных сістэм і рэсурсаў. Аднак пажадана разглядаць іх асобна, таму што яны моцна адрозніваюцца па сярэднямесячнай колькасці і даўгаце.</p>
<p>Рэгістрацыя інфармацыйных сістэм выглядае стацыянарнай. Такім чынам, нам можа спатрэбіцца мадэль <span class="caps">ARIMA</span>.</p>
<p>Інфармацыйныя рэсурсы могуць мець тэндэнцыю, аўтакарэляцыю і сезоннасць. Вось чаму мы будзем выкарыстоўваць мадэль <span class="caps">SARIMA</span>.</p>
<p>Нашым наступным крокам будзе мадэляванне гэтых даных для тлумачэння і прагназавання.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># захаваем змененыя даныя для будучага аналізу</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sys_df_dt</span><span class="p">[[</span><span class="s1">'reg'</span><span class="p">,</span> <span class="s1">'rand'</span><span class="p">]]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'data/sys_df_dt.csv'</span><span class="p">)</span> 
<span class="n">res_df_dt</span><span class="p">[[</span><span class="s1">'reg'</span><span class="p">,</span> <span class="s1">'rand'</span><span class="p">]]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">'data/res_df_dt.csv'</span><span class="p">)</span> 
</code></pre></div>
        <hr/>
      </div>

      <div class="span2">
          <nav class="toc">
            <b>Змест:</b>
          <div class="toc">
<ul>
<li><a href="#_1">Загрузка неабходных бібліятэк</a></li>
<li><a href="#_2">Вызначэнне ўласных функцый</a><ul>
<li><a href="#_3">Функцыя стварэння фрэйма даных часовых шэрагаў</a></li>
<li><a href="#_4">Функцыя стварэння графікаў</a></li>
</ul>
</li>
<li><a href="#_5">Загрузка даных</a><ul>
<li><a href="#_6">Загрузка слупкоў з унікальнымі лічбамі і датамі</a></li>
<li><a href="#_7">Робім часовы шэраг з неапрацаваных лічбаў</a></li>
</ul>
</li>
<li><a href="#_8">Агляд падзей з інфармацыйнымі сістэмамі</a><ul>
<li><a href="#_9">Агульная колькасць размеркаванняў падзей</a></li>
<li><a href="#_10">Падрабязная інфармацыя пра агульную колькасць падзей</a></li>
<li><a href="#_11">Штомесячныя змены падзей у часе</a></li>
</ul>
</li>
<li><a href="#_12">Агляд падзей інфармацыйных рэсурсаў</a><ul>
<li><a href="#_13">Агульная колькасць размеркаванняў падзей</a></li>
<li><a href="#_14">Падрабязная інфармацыя пра агульную колькасць падзей</a></li>
<li><a href="#_15">Штомесячныя змены падзей у часе</a></li>
</ul>
</li>
<li><a href="#_16">Заключэнне</a></li>
</ul>
</div>
          </nav>
      </div>  

    </div>
    <!--
    <div class="span10">
      <h3>Comments</h3>
    
    </div>
    -->
    </div>
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
	<div class="social span2" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
Кантакты	    </li>
	    <li><a href="https://github.com/Jatvyag"><i class="icon-github" style="color: #1f334b"></i>github</a></li>
	    <li><a href="https://www.linkedin.com/in/parfenchyk"><i class="icon-linkedin" style="color: #1f334b"></i>linkedin</a></li>
            <a href="mailto:jatvyag@proton.me"><i class="icon-envelope" style="color: #1f334b" ></i> email</a>

	  </ul>
	</div>
<div class="span8" id="colophon">
  <h2 align="center">Пра блог</h2>
  <p align="justify"> Гэта асабісты блог, які адлюстроўвае мае інтарэсы ў навуцы аб даных, прыняцці рашэнняў на аснове даных, юрыдычных інфармацыйных тэхналогіях і абароне персанальных даных. </p>
</div>
	<div class="site-nav span2" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
Сайт            </li>
            <li><a href="https://jatvyag.github.io/be"><i class="icon-home" style="color: #1f334b">
                </i>Галоўная</a></li>
            <li><a href="https://jatvyag.github.io/be/archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Архіў</a></li>
	          <li><a href="https://jatvyag.github.io/be/tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Меткі</a></li>
	    
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p align="center"><a href="https://jatvyag.github.io/be">Суб'ект даных</a>
      &copy; Антон Парфенчык, 2023.</p>
    <p align="center">Працуе на <a href="https://github.com/getpelican/pelican">Pelican <i class="icon-share-alt"></i></a> і      <a href="https://getbootstrap.com/2.1.1">Twitter Bootstrap <i class="icon-share-alt"></i></a>. 
Іконкі <a href="https://fontawesome.com/icons">Font Awesome <i class="icon-share-alt"></i>.</a></p>

  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>



</body>
</html>